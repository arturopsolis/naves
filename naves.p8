pico-8 cartridge // http://www.pico-8.com
version 41
__lua__

#include menu.lua
#include game.lua
#include tools.lua
#include game-over.lua

--scene machine
function _init()
	scenes = {
		menu = {
			init = init_menu,
			update = update_menu,
			draw = draw_menu
		},
		game = {
			init = init_game,
			update = update_game,
			draw = draw_game
		},
		gameover = {
			init = init_gameover,
			update = update_gameover,
			draw = draw_gameover
		}
	}

	scene = "menu"
	change_scene(scene)
end

function _update()
	scenes[scene].update()
end

function _draw()
	scenes[scene].draw()
end

__gfx__
00000000000440000004400000044000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000499a000a0990a000a994000000000000077000000770000007700000c77c0000077000000000000000000000000000000000000000000000000000
007007000049940004499440004994000000000000c77c000007700000c77c000cccccc000c77c00000000000000000000000000000000000000000000000000
00077000047a94400497a9400449a7400000000000cccc00000cc00000cccc0000cccc0000cccc00000000000000000000000000000000000000000000000000
00077000097a99404997a9940499a79000000000000cc000000cc000000cc00000000000000cc000000000000000000000000000000000000000000000000000
00700700097a9940999aa9990499a7900000000000000000000cc000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004994000449944000499400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000007a0000a7007a0000a7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00099000099009900000000000000000020000200200002002000020020000200700007000000000000000000000000000000000000000000000000000000000
009aa9009a7997a90000000000000000299009922990099229900992299009927770077700000000000000000000000000000000000000000000000000000000
09a77a90977777790000000000000000029999200299992002999920029999200777777000000000000000000000000000000000000000000000000000000000
9a7777a99a7777a90000000000000000002992000029920000299200002992000077770000000000000000000000000000000000000000000000000000000000
9a7777a99a7777a90000000000000000907227099072270990722709907227097087780700000000000000000000000000000000000000000000000000000000
09a77a90977777790000000000000000999999999999999999999999999999997777777700000000000000000000000000000000000000000000000000000000
009aa9009a7997a90000000000000000092002900092290000922900092002900770077000000000000000000000000000000000000000000000000000000000
00099000099009900000000000000000009009000099990000099000009009000070070000000000000000000000000000000000000000000000000000000000
000cc000000990000000000000000000000000055000000050000000000000057000000700000000030000300300003003000030030000300700007000000000
00c77c00009aa9000c0000c0090000900500005005000050050000500500005007000070000000003bb00bb33bb00bb33bb00bb33bb00bb37770077700000000
0c7777c009a77a90c7c00c7c9a9009a950666600006666050066660550666600007777000000000003bbbb3003bbbb3003bbbb3003bbbb300777777000000000
c777777c9a7777a977700777a7a00a7a556786500567865505678655556786507777877700000000003bb300003bb300003bb300003bb3000077770000000000
c777777c9a7777a9c7c00c7c9a9009a9006886055068860050688600006886050078870000000000b073370bb073370bb073370bb073370b7087780700000000
0c7777c009a77a900c0000c009000090055665555556655055566550055665550777777000000000bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb7777777700000000
00c77c00009aa90000000000000000005050050550500505505005055050050570700707000000000b3003b000b33b0000b33b000b3003b00770077000000000
000cc00000099000000000000000000050000000000000050000000550000000000000000000000000b00b0000bbbb00000bb00000b00b000070070000000000
00000000000440000004400000044000050000500500005005000050050000500700007000000000000000000000000000000000000000000000000000000000
0000000000499a000a0990a000a99400566006655660066556600665566006657770077700000000000000000000000000000000000000000000000000000000
00000000004994000449944000499400056666500566665005666650056666500777777000000000000000000000000000000000000000000000000000000000
00000000047a94400497a9400449a740006786000067860000678600006786000077870000000000000000000000000000000000000000000000000000000000
00000000097a99404997a9940499a790606886066068860660688606606886067078870700000000000000000000000000000000000000000000000000000000
00000000097a9940999aa9990499a790666666666666666666666666666666667777777700000000000000000000000000000000000000000000000000000000
00000000004994000449944000499400065005600065560000655600065005600770077000000000000000000000000000000000000000000000000000000000
000000000007a0000a7007a0000a7000006006000066660000066000006006000070070000000000000000000000000000000000000000000000000000000000
__sfx__
0001000037550335502d5502855024550205501c550195501755014550115500e5500b55008550065500055000000000000000000000000000000000000000000000000000000000000000000000000000000000
00020000055503065025650236501e6501a650126500b6500365002650076500c6500765006650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00020000000000515010150221503f150001500015000150001500015001150001500115002150021500215000150001500000000000000000000000000000000000000000000000000000000000000000000000
0006000000000306502a6501b65000650046501265006650136500d65008650076500965000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
